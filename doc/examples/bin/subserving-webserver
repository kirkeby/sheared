#!/usr/bin/env python

import sys

from sheared import reactor
from sheared.web import server

try:
    factory = server.HTTPServerFactory(reactor, server.HTTPServer)
    factory.addVirtualHost('localhost', server.HTTPSubServerAdapter(reactor, sys.argv[1]))
    reactor.listenTCP(factory, ('127.0.0.1', int(sys.argv[2])))
    reactor.run()

except:
    import traceback
    apply(traceback.print_exception, sys.exc_info())


